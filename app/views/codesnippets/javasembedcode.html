<pre>
    <code class="java">
    package sample.embed;

    import com.hp.score.api.Score;
    import com.hp.score.api.TriggeringProperties;
    import com.hp.score.events.EventBus;
    import com.hp.score.events.EventConstants;
    import com.hp.score.events.ScoreEvent;
    import com.hp.score.events.ScoreEventListener;
    import com.hp.score.lang.compiler.SlangCompiler;
    import org.junit.Test;
    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    import java.io.File;
    import java.net.URL;
    import java.util.Arrays;
    import java.util.HashSet;
    import java.util.Set;

    public class TestApp {

        @Test
        public void testApp() throws Exception {
            ApplicationContext applicationContext =
                new ClassPathXmlApplicationContext("/spring/score-context.xml");

            Score score = applicationContext.getBean(Score.class);
            EventBus eventBus = applicationContext.getBean(EventBus.class);
            SlangCompiler compiler = applicationContext.getBean(SlangCompiler.class);

            registerHandlers(eventBus);

            URL resource = getClass().getResource("/flows/operation.yaml");
            TriggeringProperties triggeringProperties =
                compiler.compile(new File(resource.toURI()), null);

            score.trigger(triggeringProperties);
        }

        private static void registerHandlers(EventBus eventBus) {
            Set&lt;String&gt; handlerTypes =
                new HashSet<>(Arrays.asList(EventConstants.SCORE_FINISHED_EVENT,
                    EventConstants.SCORE_FAILURE_EVENT));

            eventBus.subscribe(new ScoreEventListener() {
                @Override
                public void onEvent(ScoreEvent event) {
                    System.out.println(event.getEventType() + " : " + event.getData());
                }
            }, handlerTypes);
        }
    }

    </code>
</pre>